
<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>페이코 식권 사용처</title>
<style>
  :root { --bg:#ffffff; --text:#111827; --muted:#6b7280; --border:#e5e7eb; --accent:#7620f6; }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:var(--bg);color:var(--text);
    font-family:ui-sans-serif,-apple-system,Segoe UI,Roboto,Helvetica,Arial,Apple Color Emoji,Segoe UI Emoji}
  .wrap{max-width:860px;margin:0 auto;padding:16px}
  h1{font-size:20px;margin:0 0 4px;font-weight:800}
  .tabs{display:flex;gap:8px;overflow:auto;padding-bottom:8px;margin-bottom:8px;border-bottom:1px solid var(--border)}
  .tab{flex:0 0 auto;padding:8px 12px;border:1px solid var(--border);border-radius:999px;background:#fff;
    cursor:pointer;font-size:13px;color:var(--text)}
  .tab.active{background-color:#7620f6;color:#fff;font-weight:700;border-color:#7620f6}
  .chips{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0 12px}
  .chip{padding:6px 10px;border:1px solid var(--border);border-radius:999px;background:#fff;cursor:pointer;font-size:12px;color:var(--text)}
  .chip.active{border-color:var(--accent);color:var(--accent);font-weight:700}
  .list{display:grid}
  .row{position:relative;display:grid;grid-template-columns:1fr 56px;gap:12px;
    padding:14px 4px;border-bottom:1px solid var(--border);align-items:center}
  .left{min-width:0}
  .name{font-size:16px;font-weight:700;line-height:1.2;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .loc{font-size:12px;color:var(--muted);line-height:1.2;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-top:4px}
  .dist{font-size:12px;color:var(--muted);line-height:1.2;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-top:2px}
  .right{display:grid;grid-template-rows:36px 36px;gap:8px;justify-items:end;align-items:center}
  .btn{width:36px;height:36px;display:inline-grid;place-items:center;border:none;
    border-radius:99px;text-decoration:none;font-size:13px;font-weight:700;
    transition:filter .15s ease, transform .05s ease;user-select:none}
  .btn:hover{filter:brightness(1.1)}
  .btn:active{transform:translateY(1px)}
  .btn-naver{background:#03C75A;color:#fff;}
  .btn-kakao{background:#FEE500;color:#000;}
  .btn svg{width:18px;height:18px;display:block}
  .topbar{display:flex;gap:8px;justify-content:space-between;align-items:flex-start;margin-bottom:8px}
  .count{font-size:12px;color:var(--muted)}
  .empty{font-size:14px;color:var(--muted);padding:16px 4px}
</style>
</head>
<body>
  <div class="wrap">
    <div class="topbar">
      <div>
      <h1>페이코 식권 사용처</h1>
      <div style="font-size: 12px; color:var(--muted)" >*모든 문의 - 제이스</div>
      </div>
      <div class="count">총 <span id="count">0</span>개</div>
    </div>

    <div class="tabs" id="tabs">
      <button class="tab active" data-cat="전체">전체</button>
    </div>

    <div class="chips" id="chips">
      <div class="chip active" data-region="">전체 지역</div>
      <div class="chip" data-region="강남">강남</div>
      <div class="chip" data-region="가산">가산</div>
    </div>

    <div class="list" id="list"></div>
  </div>

<script>
  const RAW = [];
  let currentCat = "전체";
  let currentRegion = "";

  // Strong normalization: keep only Korean/English letters and numbers
  function norm(s){
    return (s||"").toString().toLowerCase()
      .replace(/[^a-z0-9\u3131-\u318e\uac00-\ud7a3]/g, "")
      .trim();
  }

  // Region synonyms (강남 includes 신논현 등)
  const REGION_KEYWORDS = {
    "강남": [
      "강남","강남구","논현","신논현","역삼","선릉","삼성","청담",
      "압구정","신사","대치","개포","도곡","수서","일원","세곡",
      "학동","학여울","한티","매봉","언주",
      "sinnonhyeon","sinnonhyun"
    ],
    "가산": [
      "가산","가산디지털","가산디지털단지","금천","금천구","철산","독산",
      "gasan","gasandigital","geumcheon","geumcheongu","doksan","cheolsan"
    ]
  };

  function includesAnyKeyword(row, keywords){
    const haystack = [
      norm(row.위치 || row.주소),
      norm(row.column1),
      norm(row.이름 || row.매장명 || row.상호명 || row.name)
    ].join("|");
    return keywords.some(k => haystack.includes(norm(k)));
  }

  function matchRegion(row, region){
    if (!region) return true;
    const set = REGION_KEYWORDS[region] || [region];
    return includesAnyKeyword(row, set);
  }

  function decorateDistance(d) {
    if (!d) return "";
    const s = (d+"").trim();
    if (/^\d+(\.\d+)?$/.test(s)) return s + "m";   // numbers → meters
    if (s.includes("분")) return "걸어서 " + s;    // minutes → prefix with '걸어서'
    return s;
  }

  function render(){
    const rows = RAW.filter(r =>
      (currentCat==="전체" || r.category===currentCat) &&
      matchRegion(r, currentRegion)
    );
    const list = document.getElementById('list');
    if (rows.length === 0){
      list.innerHTML = `<div class="empty">조건에 맞는 결과가 없습니다.</div>`;
    } else {
      list.innerHTML = rows.map(r => {
        const name = r.이름 || r.매장명 || r.상호명 || r.name || "상호명 미상";
        const loc  = r.위치 || r.주소 || "";
        const dist = decorateDistance(r.distance || "");
        const nHref = (r.naver||"").trim() || "javascript:void(0)";
        const kHref = (r.kakao||"").trim() || "javascript:void(0)";
        return `
          <div class="row">
            <div class="left">
              <div class="name">${name}</div>
              <div class="loc">${loc}</div>
              ${dist ? `<div class="dist">${dist}</div>` : ""}
            </div>
            <div class="right">
              <a class="btn btn-naver" href="${nHref}" target="_blank" rel="noopener" title="네이버 지도">
                <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                  <path fill="#FFFFFF" d="M6 5h4.2l3.8 5.4V5H18v14h-4.2L10 13.6V19H6V5z"/>
                </svg>
              </a>
              <a class="btn btn-kakao" href="${kHref}" target="_blank" rel="noopener" title="카카오 지도">
                <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                  <path fill="#000000" d="M12 4C7.6 4 4 6.9 4 10.4c0 2.2 1.5 4.1 3.7 5.2l-.9 3.3c-.1.4.3.7.6.5l3.6-2c.6.1 1.2.1 1.9.1 4.4 0 8-2.9 8-6.4S16.4 4 12 4z"/>
                </svg>
              </a>
            </div>
          </div>`;
      }).join("");
    }
    document.getElementById('count').textContent = rows.length;
  }

  document.getElementById('tabs').addEventListener('click', (e) => {
    const t = e.target.closest('.tab'); if(!t) return;
    document.querySelectorAll('.tab').forEach(el => el.classList.toggle('active', el===t));
    currentCat = t.dataset.cat;
    render();
  });

  document.getElementById('chips').addEventListener('click', (e) => {
    const c = e.target.closest('.chip'); if(!c) return;
    document.querySelectorAll('.chip').forEach(el => el.classList.toggle('active', el===c));
    currentRegion = c.dataset.region || "";
    render();
  });

  render();
</script>
</body>
</html>
