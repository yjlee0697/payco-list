<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>페이코 식권 사용처</title>
<style>
  :root { --bg:#ffffff; --text:#111827; --muted:#6b7280; --border:#e5e7eb; --accent:#7620f6; }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:var(--bg);color:var(--text);
    font-family:ui-sans-serif,-apple-system,Segoe UI,Roboto,Helvetica,Arial,Apple Color Emoji,Segoe UI Emoji}
  .wrap{max-width:860px;margin:0 auto;padding:16px}
  h1{font-size:20px;margin:0 0 4px;font-weight:800}
  .tabs{display:flex;gap:8px;overflow:auto;padding-bottom:8px;margin-bottom:8px;border-bottom:1px solid var(--border)}
  .tab{flex:0 0 auto;padding:8px 12px;border:1px solid var(--border);border-radius:999px;background:#fff;
    cursor:pointer;font-size:13px;color:var(--text)}
  .tab.active{background-color:#7620f6;color:#fff;font-weight:700;border-color:#7620f6}
  .chips{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0 12px}
  .chip{padding:6px 10px;border:1px solid var(--border);border-radius:999px;background:#fff;cursor:pointer;font-size:12px;color:var(--text)}
  .chip.active{border-color:var(--accent);color:var(--accent);font-weight:700}
  .list{display:grid}
  .row{position:relative;display:grid;grid-template-columns:1fr 56px;gap:12px;
    padding:14px 4px;border-bottom:1px solid var(--border);align-items:center}
  .left{min-width:0}
  .name{font-size:16px;font-weight:700;line-height:1.2;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .loc{font-size:12px;color:var(--muted);line-height:1.2;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-top:4px}
  .dist{font-size:12px;color:var(--muted);line-height:1.2;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-top:2px}
  .right{display:grid;grid-template-rows:36px 36px;gap:8px;justify-items:end;align-items:center}
  .btn{width:36px;height:36px;display:inline-grid;place-items:center;border:none;
    border-radius:99px;text-decoration:none;font-size:13px;font-weight:700;
    transition:filter .15s ease, transform .05s ease;user-select:none}
  .btn:hover{filter:brightness(1.1)}
  .btn:active{transform:translateY(1px)}
  .btn-naver{background:#03C75A;color:#fff;}
  .btn-kakao{background:#FEE500;color:#000;}
  .btn svg{width:18px;height:18px;display:block}
  .topbar{display:flex;gap:8px;justify-content:space-between;align-items:flex-start;margin-bottom:8px}
  .count{font-size:12px;color:var(--muted)}
  .empty{font-size:14px;color:var(--muted);padding:16px 4px}


/* --- 메뉴 추천 플로팅 버튼 --- */
.game-btn { position:fixed; bottom:24px; right:24px; z-index:60; display:inline-flex; gap:8px; align-items:center;
  padding:12px 16px; border-radius:999px; border:none; background:var(--accent,#7620f6); color:#fff;
  box-shadow:0 4px 10px rgba(0,0,0,.15); font-weight:700; cursor:pointer;
  transition:transform .15s ease, box-shadow .15s ease;}
.game-btn:hover { transform:translateY(-2px); box-shadow:0 6px 14px rgba(0,0,0,.25); }
.game-btn span { font-size:20px; }

/* Modals */
.modal-backdrop { position:fixed; inset:0; background:rgba(17,24,39,.5); display:none;
  align-items:center; justify-content:center; z-index:50; }
.modal { background:#fff; border-radius:16px; box-shadow:0 10px 30px rgba(0,0,0,.2);
  max-width:420px; width:92%; padding:20px; }
.modal h2 { margin:0 0 8px; font-size:18px; }
.modal p { margin:0 0 12px; color:var(--muted,#6b7280); font-size:13px; }
.radios { display:grid; grid-template-columns:1fr 1fr; gap:8px; margin:32px 0; }
.radio { padding:60px 0 60px 0; border:1px solid var(--border,#e5e7eb); border-radius:12px;
  text-align:center; cursor:pointer; }
.radio.active { border-color:var(--accent,#7620f6); box-shadow:0 0 0 3px rgba(118,32,246,.15); }
.primary { width:100%; padding:12px; border:none; border-radius:12px; background:var(--accent,#7620f6);
  color:#fff; font-weight:700; cursor:pointer; }
.ghost { width:100%; padding:12px; border:1px solid var(--border,#e5e7eb); border-radius:12px;
  background:#fff; color:var(--text,#111827); cursor:pointer;}

/* Overlay + card stack */
.overlay { position:fixed; inset:0; display:none; align-items:center; justify-content:center;
  background:linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.96)); z-index:40; }
.stack { position:relative; width:min(520px, calc(100vw - 32px)); height:min(660px, 86vh); }
.card { position:absolute; inset:0; background:#fff; border-radius:20px; border:1px solid var(--border,#e5e7eb);
  box-shadow:0 20px 40px rgba(0,0,0,.08); padding:20px; display:grid; grid-template-rows:auto 1fr auto; gap:14px;
  user-select:none; touch-action:none; }
.badge { font-size:11px; color:#6b7280; }
.title { font-weight:800; font-size:22px; text-align:center; }
.meta { display: flex; flex-direction: column; justify-content: center; gap:8px; place-items:center; text-align:center; margin: 0 0 80px 0; }
.meta .loc { color:var(--muted,#6b7280); white-space:normal; }
.meta .dist { font-weight:700; text-align:center; }
.overlay .links, .overlay .actions { display:none !important; }
.close-overlay { position:absolute; top:12px; right:12px; width:36px; height:36px; border:none; border-radius:50%;
  background:rgba(255,255,255,0.85); backdrop-filter:blur(4px); -webkit-backdrop-filter:blur(4px); font-size:18px;
  line-height:1; cursor:pointer; box-shadow:0 2px 6px rgba(0,0,0,0.1); }
.swipe-hint { position:absolute; bottom:env(safe-area-inset-bottom, 12px); left:16px; right:16px;
  padding:10px 0 14px; background:rgba(255,255,255,0.85); backdrop-filter:blur(6px); -webkit-backdrop-filter:blur(6px);
  text-align:center; font-size:13px; color:#444; display:flex; justify-content:center; gap:80px; font-weight:500;
  border-top:1px solid rgba(0,0,0,.06); }


/* === 개선: 모달/오버레이/결과 모달 열림 시 메뉴 추천 버튼 숨김 === */
.modal-open .game-btn { display: none !important; }

/* === 개선: 카드 스와이프 힌트 좌/우 배치 === */
.card .hint{
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  left:12px;
  font-weight:800;
  font-size:28px;
  letter-spacing:1px;
  padding:6px 10px;
  border-radius:10px;
  background:rgba(255,255,255,0.85);
  backdrop-filter:blur(4px);
  -webkit-backdrop-filter:blur(4px);
  color:#111827;
  border:1px solid rgba(0,0,0,0.08);
  box-shadow:0 2px 6px rgba(0,0,0,0.08);
  opacity:0;           /* JS에서 드래그 시 0→1로 변경 */
  pointer-events:none; /* 클릭 방지 */
}
.card .hint.no{
  left:auto;
  right:12px;
}

</style>
</head>
<body>
  <div class="wrap">
    <div class="topbar">
      <div>
      <h1>페이코 식권 사용처</h1>
      <div style="font-size: 12px; color:var(--muted)" >*모든 문의 - 제이스</div>
      </div>
      <div class="count">총 <span id="count">0</span>개</div>
    </div>

    <div class="tabs" id="tabs"></div>

    <div class="chips" id="chips">
      <div class="chip active" data-region="">전체 지역</div>
      <div class="chip" data-region="강남">강남</div>
      <div class="chip" data-region="가산">가산</div>
    </div>

    <div class="list" id="list"></div>
  </div>

<script src="script.js"></script>

  <button id="openGame" class="game-btn" aria-haspopup="dialog" aria-controls="regionModal" title="지역 선택 후 메뉴 추천시작">
    <span>🍚</span><b>메뉴 추천</b>
  </button>

<!-- Region select modal -->
<div id="regionBackdrop" class="modal-backdrop" role="dialog" aria-modal="true" style="display:none">
  <div class="modal" id="regionModal">
    <h2>지역을 선택하세요</h2>
    <p>강남 또는 가산 중 하나를 선택하면 무작위로 식당을 추천해드려요.</p>
    <div class="radios">
      <div class="radio" data-region="강남">강남</div>
      <div class="radio" data-region="가산">가산</div>
    </div>
    <div style="display: flex; gap: 8px;">
      <button class="ghost" id="closeRegion">취소</button>
      <button class="primary" id="startGame" disabled>시작</button>
    </div>
  </div>
</div>

<!-- Tinder-like overlay -->
<div id="overlay" class="overlay" aria-live="polite" style="display:none">
    <div class="swipe-hint">
    <span>⬅️ 더 자세히</span>
    <span>다음 추천 ➡️</span>
  </div>
  <button id="closeOverlayBtn" class="close-overlay" aria-label="닫기">✖</button>
  <div class="stack" id="stack"></div>

</div>

<!-- Result modal (after YES) -->
<div id="resultBackdrop" class="modal-backdrop result" role="dialog" aria-modal="true" style="display:none">
  <div class="modal">
    <!-- <h2 class="center">맛집으로 Go! 😋</h2> -->
    <div id="resultBody" class="meta"></div>
    <div class="links" id="resultLinks"></div>
    <button class="ghost" id="resultClose">다른 곳도 볼래요</button>
  </div>
</div>

</body>
</html>
